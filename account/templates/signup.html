{% extends 'base.html' %} {% load static %} {% block title %}회원가입{% endblock %} {% block content %}
<link rel="stylesheet" href="{% static 'css/login.css' %}" />
<link rel="stylesheet" href="{% static 'css/signup.css' %}" />

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
  $(document).ready(function () {
    $("#check-username").click(function () {
      const username = $("#id_username").val();
      $.ajax({
        url: '{% url "check_username" %}',
        data: {
          username: username,
        },
        dataType: "json",
        success: function (data) {
          if (data.is_taken) {
            $("#username-check-msg").text("이미 존재하는 아이디입니다.");
          } else {
            //$("#username-check-msg").text("사용 가능한 아이디입니다.");
          }
        },
      });
    });
  });
</script>
<body>
  <div class="container" style="width: 100%">
    <header>
      <div class="logo-div">
        <img src="{% static 'assets/img/logo.png' %}" />
      </div>
    </header>
    <form method="POST">
      {% csrf_token %}
      <div class="id-check">
        <input id="id_username" name="username" type="text" placeholder="아이디를 입력해주세요" maxlength="20" required />
        <button type="button" id="check-username" class="button">중복 확인</button>
      </div>

      <input id="id_password" name="password" type="password" placeholder="비밀번호를 입력해주세요" minlength="8" required />
      <p>*영문 / 숫자 포함 8글자 이상 입력해주세요</p>
      <input id="id_password_confirm" name="password_confirm" type="password" placeholder="비밀번호를 다시 입력해주세요" minlength="8" required />
      <div id="username-check-msg"></div>
      <button id="login_btn" type="submit" class="button">회원가입</button>
    </form>

    <div style="color: red; margin-top: 10px">
      {% for field in form %} {% for error in field.errors %}
      <p>{{ error }}</p>
      {% endfor %} {% endfor %}
    </div>
  </div>
</body>

{% endblock %}
